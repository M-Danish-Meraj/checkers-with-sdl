// isValidMove.c
#include "isValidMove.h"
#include "globals.h"

int isValidMove(char board[BOARD_SIZE][BOARD_SIZE], int startX, int startY, int endX, int endY, char player) {
    if (endX < 0 || endX >= BOARD_SIZE || endY < 0 || endY >= BOARD_SIZE || board[endX][endY] != EMPTY) return 0;
    if (abs(endX - startX) == 1 && abs(endY - startY) == 1) return 1;

    if (board[startX][startY] != player) return 0;

    if (abs(endX - startX) == 2 && abs(endY - startY) == 2) {
        int midX = (startX + endX) / 2;
        int midY = (startY + endY) / 2;
        char opponent = (player == RED) ? BLACK : RED;
        if (board[midX][midY] == opponent) return 1;
    }
    return 0;
}
